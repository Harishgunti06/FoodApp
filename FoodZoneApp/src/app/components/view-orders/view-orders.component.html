<div class="container mt-4">
  <h2 class="text-primary">My Orders</h2>
  <hr>
  <button class="btn btn-secondary mb-3" (click)="goBack()">‚Üê Back</button>

  <div *ngIf="orders && orders.length > 0; else noOrders">
    <div class="row">
      <div class="col-md-6 mb-3" *ngFor="let order of orders">
        <div class="card shadow-sm">
          <div class="card-body d-flex justify-content-between align-items-center">
            <div>
              <p>#OrderId-{{ order.orderItemId }}</p>
              <h5 class="card-title mb-1">{{ order.itemName }}</h5>
              <p class="card-text mb-1"><strong>Quantity:</strong> {{ order.quantity }}</p>
              <p class="card-text"><strong>Total:</strong> {{ order.quantity * order.price | currency:'INR' }}</p>

              <!-- ‚≠ê Rating Input -->
              <div *ngIf="!ratedItems.has(order.orderItemId)">
                <label class="me-2"><strong>Rate this item:</strong></label>
                <ng-container *ngFor="let star of [1, 2, 3, 4, 5]">
                  <i class="fa-star"
                     [ngClass]="{
                     'fas text-warning' : star <= ratingMap[order.orderItemId],
         'far text-muted': star > ratingMap[order.orderItemId]
       }"
       style="cursor: pointer;"
       (click)="setRating(order.menuItemId, star, order.orderItemId)">
    </i>
                </ng-container>
              </div>


              <!-- Optional: Thank-you message after rating -->
              <div *ngIf="ratedItems.has(order.orderItemId)" class="text-success">
                Thank you for rating!
              </div>


            </div>
            <div class="text-muted ms-3">
              üõí
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>

  <ng-template #noOrders>
    <div class="alert alert-info mt-4">No orders placed yet.</div>
  </ng-template>
</div>
